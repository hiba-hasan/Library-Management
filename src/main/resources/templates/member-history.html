<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="~{fragments :: head}"></th:block>
    <title>Member History</title>
</head>
<body>
<nav th:replace="~{fragments :: navbar}"></nav>
<div class="container">
    <h3>Borrowing History for <span th:text="${member.name}">Member Name</span></h3>
    <p th:text="${member.email}">member@email.com</p>

    <table class="table table-striped mt-4">
        <thead>
        <tr>
            <th>Book Title</th>
            <th>Borrowed</th>
            <th>Due</th>
            <th>Returned</th>
            <th>Status</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${#lists.isEmpty(history)}">
            <td colspan="5" class="text-center">This member has no borrowing history.</td>
        </tr>
        <tr th:each="record : ${history}">
            <td th:text="${record.book.title}">The Hobbit</td>
            <td th:text="${record.borrowDate}">2025-10-01</td>
            <td th:text="${record.dueDate}">2025-10-15</td>
            <td th:text="${record.returnDate}">-</td>
            <td>
                <span th:if="${record.returnDate != null}" class="badge bg-success">Returned</span>
                <span th:if="${record.returnDate == null && record.dueDate.isBefore(today)}" class="badge bg-danger">Overdue</span>
                <span th:if="${record.returnDate == null && !record.dueDate.isBefore(today)}" class="badge bg-secondary">Borrowed</span>
            </td>
        </tr>
        </tbody>
    </table>

    <a th:href="@{/admin/dashboard}" class="btn btn-primary mt-3">Back to Dashboard</a>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>